{"version":3,"file":"static/js/767.d0651ca3.chunk.js","mappings":"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","sources":["Pages/User/Orders/Orders.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport UniversalModal from \"../../../Components/Modal/UniversalModal\";\r\nimport PageHeader from \"../../../Components/PageHeaders/PageHeader\";\r\nimport OrderCard from \"../../../Components/OrderCard/OrderCard\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { deleteOrder, getOrdersCount, getOrders } from \"./orderSlice\";\r\nimport { map, uniqueId } from \"lodash\";\r\nimport { filterOrder } from \"../../Filter/filterSlice\";\r\nimport { filter } from \"./constants\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { getTranslations } from \"../../../translation\";\r\nimport Filter from \"../../Filter/Filter\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { Pagination } from \"@mui/material\";\r\nimport { Loading } from \"@nextui-org/react\";\r\n\r\nconst Orders = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const errorMoney = location?.state?.error;\r\n  const { t } = useTranslation([\"common\"]);\r\n  const translations = getTranslations(t);\r\n  const filterData = filter(t);\r\n  const navigate = useNavigate();\r\n  const {\r\n    logged,\r\n    userData: { user, organization },\r\n  } = useSelector((state) => state.login);\r\n  const { orders, loading } = useSelector((state) => state.orders);\r\n  const {\r\n    order,\r\n    categories,\r\n    subcategories,\r\n    subcategories2,\r\n    tradetypes,\r\n    regions,\r\n    districts,\r\n    name,\r\n  } = useSelector((state) => state.filter);\r\n  const [orderId, setOrderId] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(0);\r\n  const [totalDatas, setTotalDatas] = useState(0);\r\n  const countPage = 10;\r\n\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [modalBody, setModalBody] = useState(null);\r\n\r\n  const [filterVisible, setFilterVisible] = useState(false);\r\n  const [filterBody, setFilterBody] = useState(null);\r\n\r\n  const [modalVisibleOrg, setModalVisibleOrg] = useState(false);\r\n\r\n  const closeHandler = () => {\r\n    setModalVisible(false);\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setModalVisible(!modalVisible);\r\n  };\r\n\r\n  const openModal = (body) => {\r\n    setModalBody(body);\r\n    setModalVisible(true);\r\n    setOrderId(null);\r\n  };\r\n\r\n  const deleteHandler = (id) => {\r\n    setOrderId(id);\r\n    setModalBody(\"approve\");\r\n    setModalVisible(true);\r\n  };\r\n\r\n  const editHandler = (id) => {\r\n    setOrderId(id);\r\n    setModalBody(\"createOrder\");\r\n    setModalVisible(true);\r\n  };\r\n\r\n  const handleFilter = (e) => {\r\n    const value = e.target.value;\r\n    dispatch(filterOrder(value));\r\n  };\r\n\r\n  const deleteOrderById = () => {\r\n    orderId &&\r\n      dispatch(deleteOrder({ id: orderId })).then(({ error }) => {\r\n        if (!error) {\r\n          setModalVisible(false);\r\n          setOrderId(null);\r\n        }\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.history.replaceState({}, document.title);\r\n\r\n    setModalVisibleOrg(errorMoney == undefined ? false : true);\r\n\r\n    setCurrentPage(0);\r\n    const data = {\r\n      page: 0,\r\n      count: countPage,\r\n      order,\r\n      categories,\r\n      subcategories,\r\n      subcategories2,\r\n      tradetypes: [],\r\n      regions,\r\n      districts,\r\n      user: user?._id,\r\n      name: \"\",\r\n    };\r\n    dispatch(getOrders(data));\r\n    dispatch(getOrdersCount(data)).then(\r\n      ({ error, payload: { totalCount } }) => {\r\n        if (!error) {\r\n          setTotalDatas(totalCount);\r\n        }\r\n      }\r\n    );\r\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [\r\n    order,\r\n    categories,\r\n    subcategories,\r\n    subcategories2,\r\n    tradetypes,\r\n    regions,\r\n    districts,\r\n    name,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const data = {\r\n      page: currentPage,\r\n      count: countPage,\r\n      order,\r\n      categories,\r\n      subcategories,\r\n      subcategories2,\r\n      tradetypes: [],\r\n      regions,\r\n      districts,\r\n      user: user?._id,\r\n      name: \"\",\r\n    };\r\n    dispatch(getOrders(data));\r\n    dispatch(getOrdersCount(data)).then(\r\n      ({ error, payload: { totalCount } }) => {\r\n        if (!error) {\r\n          setTotalDatas(totalCount);\r\n        }\r\n      }\r\n    );\r\n    //    eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, order, currentPage, countPage]);\r\n\r\n  return (\r\n    <div className='w-full bg-white pb-10'>\r\n      <div className='md:container'>\r\n        <div className='w-full block md:flex'>\r\n          <Filter\r\n            filterBody={filterBody}\r\n            filterVisible={filterVisible}\r\n            setFilterVisible={setFilterVisible}\r\n          />\r\n          <div className='w-full px-4 md:px-4 flex flex-col gap-[20px]'>\r\n            <PageHeader\r\n              translations={translations}\r\n              isOrganization={!!organization}\r\n              currentPage={currentPage}\r\n              countPage={countPage}\r\n              totalDatas={totalDatas}\r\n              setCurrentPage={setCurrentPage}\r\n              count={totalDatas}\r\n              onClick={() => {\r\n                if (logged) {\r\n                  navigate(\"/create_order\");\r\n                } else {\r\n                  openModal(\"warningSignIn\");\r\n                }\r\n              }}\r\n              countTitle={translations.jami}\r\n              buttonTitle={\"Создать\"}\r\n              handleFilter={handleFilter}\r\n              filterData={order}\r\n              filter={filterData}\r\n              setFilterBody={setFilterBody}\r\n              setFilterVisible={setFilterVisible}\r\n              mainTitle='Заявки'\r\n              filterBtnClick={() => setFilterVisible(!filterVisible)}\r\n            />\r\n            <div className='px-0 md:px-4 flex flex-col gap-[20px]'>\r\n              {loading ? (\r\n                <Loading />\r\n              ) : (\r\n                map(orders, (order) => (\r\n                  <OrderCard\r\n                    translations={translations}\r\n                    logged={logged}\r\n                    key={uniqueId()}\r\n                    order={order}\r\n                    editHandler={editHandler}\r\n                    deleteHandler={deleteHandler}\r\n                  />\r\n                ))\r\n              )}\r\n            </div>\r\n            {totalDatas > 0 && (\r\n              <div className='flex justify-center py-2'>\r\n                <Pagination\r\n                  defaultPage={1}\r\n                  variant='outlined'\r\n                  color='primary'\r\n                  count={Math.ceil(totalDatas / countPage)}\r\n                  page={currentPage + 1}\r\n                  onChange={(event, value) => {\r\n                    setCurrentPage(value - 1);\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <UniversalModal\r\n        isOpen={modalVisible}\r\n        body={modalBody}\r\n        closeModal={closeHandler}\r\n        toggleModal={toggleModal}\r\n        typeOfWarning={\"user\"}\r\n        orderId={orderId}\r\n        modalBody={modalBody}\r\n        headerText={translations.buyurtmani_ochirish}\r\n        title={translations.siz_buyurtmani_ochirishni_xohlaysizmi}\r\n        approveFunction={deleteOrderById}\r\n      />\r\n\r\n      <UniversalModal\r\n        body={\"warningOrg\"}\r\n        isOpen={modalVisibleOrg}\r\n        closeModal={() => setModalVisibleOrg(false)}\r\n        toggleModal={() => setModalVisibleOrg(false)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n"],"names":["dispatch","useDispatch","location","useLocation","errorMoney","state","error","t","useTranslation","translations","getTranslations","filterData","filter","navigate","useNavigate","useSelector","login","logged","userData","user","organization","orders","loading","order","categories","subcategories","subcategories2","tradetypes","regions","districts","name","useState","orderId","setOrderId","currentPage","setCurrentPage","totalDatas","setTotalDatas","modalVisible","setModalVisible","modalBody","setModalBody","filterVisible","setFilterVisible","filterBody","setFilterBody","modalVisibleOrg","setModalVisibleOrg","deleteHandler","id","editHandler","useEffect","window","history","replaceState","document","title","undefined","data","page","count","_id","getOrders","getOrdersCount","then","totalCount","payload","className","isOrganization","countPage","onClick","countTitle","jami","buttonTitle","handleFilter","e","value","target","filterOrder","mainTitle","filterBtnClick","map","uniqueId","defaultPage","variant","color","Math","ceil","onChange","event","isOpen","body","closeModal","toggleModal","typeOfWarning","headerText","buyurtmani_ochirish","siz_buyurtmani_ochirishni_xohlaysizmi","approveFunction","deleteOrder"],"sourceRoot":""}