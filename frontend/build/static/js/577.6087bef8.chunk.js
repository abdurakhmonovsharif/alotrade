"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[577],{9577:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var s=i(2791),l=i(1399),a=i(9434),r=i(3356),o=i(4373),d=i(8285),n=i(4313),c=i(763),u=i(5165),g=i(5393),p=i(7689),f=i(4397),h=i(6088),m=i(5454),v=i(184);const x=()=>{const e=(0,a.I0)(),t=(0,p.TH)(),{logged:i,userData:{user:x,organization:b}}=(0,a.v9)((e=>e.login)),{width:j}=(0,f.Z)(),{products:y,loading:S}=(0,a.v9)((e=>e.products)),{product:w,categories:k,subcategories:C,subcategories2:Z,tradetypes:N,regions:P,districts:B,name:F}=(0,a.v9)((e=>e.filter)),[z,I]=(0,s.useState)(null),[M,T]=(0,s.useState)(0),[D,E]=(0,s.useState)(0),[H,V]=(0,s.useState)(j<720?20:15),[q,O]=(0,s.useState)(!1),[Y,_]=(0,s.useState)(null),[J,R]=(0,s.useState)(!1),[X,A]=(0,s.useState)(null),G=e=>{I(e),_("approve"),O(!0)},K=e=>{I(e),_("createProduct"),O(!0)};return(0,s.useEffect)((()=>{var i,s;window.history.replaceState({},document.title);const l=null===t||void 0===t||null===(i=t.state)||void 0===i||null===(s=i.category)||void 0===s?void 0:s._id,a={page:D,count:H,product:w,categories:k,subcategories:C,subcategories2:Z,tradetypes:N,regions:P,districts:B,user:null===x||void 0===x?void 0:x._id,name:F};l&&(a.categories=[...k,l]),e((0,d.Xp)(a)),e((0,d.Y2)(a)).then((e=>{let{payload:{totalCount:t},error:i}=e;i||T(t)}))}),[e,w,D,H,k,C,Z,N,P,B,x,F,j]),(0,s.useEffect)((()=>{V(j<720?20:15)}),[j]),(0,s.useEffect)((()=>{e((0,d.sR)())}),[e]),(0,v.jsxs)("div",{className:"w-full bg-white pb-[100px]",children:[(0,v.jsx)("div",{className:"md:container",children:(0,v.jsxs)("div",{className:"w-full block md:flex",children:[(0,v.jsx)(g.Z,{filterBody:X,filterVisible:J,setFilterVisible:R}),(0,v.jsxs)("div",{className:"w-full md:px-4 flex flex-col gap-[20px]",children:[(0,v.jsx)(l.Z,{isOrganization:!!b,totalDatas:M,currentPage:D,setCurrentPage:E,filter:r.h,count:M,onClick:()=>(_("createProduct"),O(!0),void I(null)),handleFilter:t=>{const i=t.target.value;e((0,o.BY)(i))},filterData:w,setFilterBody:A,setFilterVisible:R,mainTitle:"\u0422\u043e\u0432\u0430\u0440\u044b",countTitle:"Jami:",filterBtnClick:()=>R(!J)}),S?(0,v.jsx)(m.ZP,{}):(0,v.jsx)("div",{className:"grid grid-cols-2 px-2 gap-2 md:grid-cols-5 md:gap-3",children:(0,c.map)(y,(e=>(0,v.jsx)(u.Z,{logged:i,product:e,editHandler:K,deleteHandler:G},(0,c.uniqueId)())))}),M>0&&(0,v.jsx)("div",{className:"flex justify-center py-2",children:(0,v.jsx)(h.Z,{defaultPage:1,variant:"outlined",color:"primary",count:Math.ceil(M/H),page:D+1,onChange:(e,t)=>{E(t-1)}})})]})]})}),(0,v.jsx)(n.Z,{isOpen:q,body:Y,closeModal:()=>{O(!1)},toggleModal:()=>{O(!q)},productId:z,modalBody:Y,headerText:"Mahsulotni o'chirish",title:"Siz rostdan ham mahsulotni o'chirmoqchimisiz?",approveFunction:()=>{z&&e((0,d.Ir)({id:z})).then((e=>{let{error:t}=e;t||(O(!1),I(null))}))}})]})}}}]);
//# sourceMappingURL=577.6087bef8.chunk.js.map